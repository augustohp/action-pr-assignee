name: "Release"

# Publish new packages upon tag 
on: 
  release:
    types: [published]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - run: |
          npm install
          npm run all
  publish:
    runs-on: ubuntu-latest
    needs: build
    steps:
      - npm publish --tag '$GITHUB_REF'

# Unpublish deleted releases
on: 
  release:
    types: [unpublished, deleted]
jobs:
  unpublish:
    runs-on: ubuntu-latest
    steps:
      - npm unpublish '@augustohp/action-pr-assignee@$GITHUB_REF'